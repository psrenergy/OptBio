<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Mathematical Model 路 OptBio</title><meta name="title" content="Mathematical Model 路 OptBio"/><meta property="og:title" content="Mathematical Model 路 OptBio"/><meta property="twitter:title" content="Mathematical Model 路 OptBio"/><meta name="description" content="Documentation for OptBio."/><meta property="og:description" content="Documentation for OptBio."/><meta property="twitter:description" content="Documentation for OptBio."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img src="assets/logo.png" alt="OptBio logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">OptBio</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="index.html">Home</a></li><li><a class="tocitem" href="tutorial.html">Tutorial</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="configuration.html">Configuration</a></li><li><a class="tocitem" href="product.html">Product</a></li><li><a class="tocitem" href="process.html">Process</a></li><li><a class="tocitem" href="plant.html">Plant</a></li><li><a class="tocitem" href="sum_of_products_constraint.html">Sum of products constraint</a></li></ul></li><li><a class="tocitem" href="api.html">API Reference</a></li><li class="is-active"><a class="tocitem" href="optimization.html">Mathematical Model</a><ul class="internal"><li class="toplevel"><a class="tocitem" href="#Investment-model"><span>Investment model</span></a></li><li><a class="tocitem" href="#Sets"><span>Sets</span></a></li><li><a class="tocitem" href="#Constants"><span>Constants</span></a></li><li><a class="tocitem" href="#Decision-Variables"><span>Decision Variables</span></a></li><li><a class="tocitem" href="#Others"><span>Others</span></a></li><li><a class="tocitem" href="#Objective-Function"><span>Objective Function</span></a></li><li><a class="tocitem" href="#Constraints"><span>Constraints</span></a></li><li class="toplevel"><a class="tocitem" href="#Operation-model"><span>Operation model</span></a></li><li><a class="tocitem" href="#Sets-2"><span>Sets</span></a></li><li><a class="tocitem" href="#Constants-2"><span>Constants</span></a></li><li><a class="tocitem" href="#Decision-Variables-2"><span>Decision Variables</span></a></li><li><a class="tocitem" href="#Objective-Function-2"><span>Objective Function</span></a></li><li><a class="tocitem" href="#Constraints-2"><span>Constraints</span></a></li><li class="toplevel"><a class="tocitem" href="#Communication-between-stages"><span>Communication between stages</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="optimization.html">Mathematical Model</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="optimization.html">Mathematical Model</a></li></ul></nav><div class="docs-right"><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Model"><a class="docs-heading-anchor" href="#Model">Model</a><a id="Model-1"></a><a class="docs-heading-anchor-permalink" href="#Model" title="Permalink"></a></h1><p>OptBio runs a model that aims to maximize the expected profit of the defined production chain, considering the uncertainty associated with the availability of the basis product and the selling prices of the bioproducts. According to the input parameters, the model will define the capacity and the associated investment in each industrial plant, as well as the amount of each bioproduct to be produced and sold. The model can be decomposed into two stages: the investment stage and the operation stage. In the deterministic equivalent solution method, one model is created, including all variables and constraints of both stages. In the Benders solution method, the stages are defined and solved separately, and the communication between them is made through Benders cuts. The master variable is the capacity of each industrial plant. The details of each stage of the model are presented below.</p><h1 id="Investment-model"><a class="docs-heading-anchor" href="#Investment-model">Investment model</a><a id="Investment-model-1"></a><a class="docs-heading-anchor-permalink" href="#Investment-model" title="Permalink"></a></h1><p>The Investment model is the stage in charge of defining the capacity and the investment associated with each industrial plant. The model aims to minimize the annuities of the investments in the plants and, in the Benders solution method, the expected value of the future costs.  </p><h2 id="Sets"><a class="docs-heading-anchor" href="#Sets">Sets</a><a id="Sets-1"></a><a class="docs-heading-anchor-permalink" href="#Sets" title="Permalink"></a></h2><ul><li><span>$K$</span>: set of plants</li><li><span>$S$</span>: set of scenarios</li></ul><h2 id="Constants"><a class="docs-heading-anchor" href="#Constants">Constants</a><a id="Constants-1"></a><a class="docs-heading-anchor-permalink" href="#Constants" title="Permalink"></a></h2><ul><li><span>$B^{ref}_k$</span>: capex of a reference plant</li><li><span>$C^{ref}_k$</span>: capacity of a reference plant</li><li><span>$C^0_k$</span>: plant initial capacity</li><li><span>$\sigma_k$</span>: plant scaling factor</li><li><span>$r_k$</span>: plant annual interest rate</li><li><span>$n_k$</span>: plant number of years of lifespan</li><li><span>$\overline{C}_k$</span>: plant maximum capacity, defined by the user</li><li><span>$\overline{\overline{C}}_k$</span>: plant maximum reachable capacity, calculated according to input products availability</li><li><span>$\overline{C}^\sigma_k$</span>: plant capacity threshold for scale economy</li><li><span>$\hat{Q}_s$</span>: evaluated future cost</li><li><span>$\hat{C}_{k, s}$</span>: evaluated capacity</li><li><span>$\hat{\lambda}_{k, s}$</span>: evaluated marginal cost of capacity constraints</li><li><span>$m$</span>: number of pieces for piecewise linearization</li><li><span>$q$</span>: ratio at which each piece increases</li></ul><h2 id="Decision-Variables"><a class="docs-heading-anchor" href="#Decision-Variables">Decision Variables</a><a id="Decision-Variables-1"></a><a class="docs-heading-anchor-permalink" href="#Decision-Variables" title="Permalink"></a></h2><ul><li><span>$C_k$</span>: plant capacity</li><li><span>$B_k$</span>: plant investment</li><li><span>$A_k$</span>: plant annuity</li><li><span>$Q_s$</span>: future cost</li></ul><h2 id="Others"><a class="docs-heading-anchor" href="#Others">Others</a><a id="Others-1"></a><a class="docs-heading-anchor-permalink" href="#Others" title="Permalink"></a></h2><ul><li><span>$\dot{C}_{k,p}$</span>: plant capacity values for piecewise linearization</li><li><span>$\dot{B}_{k,p}$</span>: plant investment values for piecewise linearization</li></ul><p>The original relation between the variables of investment <span>$B_k$</span> and capacity <span>$C_k$</span> is exponential, as shown below:</p><p class="math-container">\[ B_k = B^{ref}_k \cdot \left( \frac{C_k}{C^{ref}_k} \right) ^{\sigma_k}  \]</p><p>It expresses the scale economy of the plants. A intuitive way to understand it is to think that if the capacity of a plant is doubled, the investment associated is less than double, and if the capacity is halved, the investment is more than halved.</p><p>When there is a pre-existing capacity <span>$C^0_k$</span>, the investment associated with <span>$C_k^0$</span> is subtracted from the investment associated with the total capacity <span>$C_k$</span>:</p><p class="math-container">\[ B_k = B^{ref}_k \cdot \left( \frac{C_k}{C^{ref}_k} \right) ^{\sigma_k} - B^{ref}_k \cdot \left( \frac{C_k^0}{C^{ref}_k} \right) ^{\sigma_k} \]</p><p>The function is both nonlinear as nonconvex. In order to linearize it, the capacity domain is divided into <span>$m$</span> pieces, defined by <span>$m + 1$</span> points. The investment is evaluated at each point, and a linear function connects each pair of points. To reduce approximation errors, the points are defined by a geometric progression, with a ratio <span>$1 + q$</span>. This way, the points are more concentrated in the lower capacity values, where the investment values are more sensitive to changes in capacity.</p><p class="math-container">\[ \dot{C}_{k,0} = C^0_k, \ \ \ \forall k \in K \]</p><p class="math-container">\[ \dot{C}_{k,p} = C^0_k + ( \text{min}\{\overline{\overline{C}}_k, \overline{C}^\sigma_k \}- C^0_k) \cdot \frac{(1 + q)^p - 1}{(1+q)^m - 1}  \ \ \ \forall \ p = 0,\dots,m, \ k \in K \]</p><p class="math-container">\[ \dot{B}_{k,p} = B^{ref}_k \cdot \left( \frac{\dot{C}_{k,p}}{C^{ref}_k} \right) ^{\sigma_k} - B^{ref}_k \cdot \left( \frac{C^0_{k,p}}{C^{ref}_k} \right) ^{\sigma_k} \ \ \ \forall \ p = 0,\dots,m, \ k \in K \]</p><p class="math-container">\[ \dot{C}_{k,m+1} = \overline{\overline{C}}_k, \ \ \ \forall k \in K, \ \text{if } \overline{C}^\sigma_k \leq \overline{\overline{C}}_k \]</p><p class="math-container">\[ \dot{B}_{k,m+1} = B^{ref}_k \cdot \left( \frac{\dot{C}_{k,m}}{C^{ref}_k} \right) ^{\sigma_k} \cdot \frac{\dot{C}_{k,m+1}}{\dot{C}_{k,m}} - B^{ref}_k \cdot \left( \frac{C^0_k}{C^{ref}_k} \right) ^{\sigma_k}
    \text{if } \overline{C}^\sigma_k \leq \overline{\overline{C}}_k \]</p><h2 id="Objective-Function"><a class="docs-heading-anchor" href="#Objective-Function">Objective Function</a><a id="Objective-Function-1"></a><a class="docs-heading-anchor-permalink" href="#Objective-Function" title="Permalink"></a></h2><h3 id="Deterministic-equivalent-solution-method"><a class="docs-heading-anchor" href="#Deterministic-equivalent-solution-method">Deterministic equivalent solution method</a><a id="Deterministic-equivalent-solution-method-1"></a><a class="docs-heading-anchor-permalink" href="#Deterministic-equivalent-solution-method" title="Permalink"></a></h3><p class="math-container">\[min{\sum_{k \in K} A_k}\]</p><h3 id="Benders-solution-method"><a class="docs-heading-anchor" href="#Benders-solution-method">Benders solution method</a><a id="Benders-solution-method-1"></a><a class="docs-heading-anchor-permalink" href="#Benders-solution-method" title="Permalink"></a></h3><p>The annuities are added to the objective function in both solution methods.</p><p class="math-container">\[min{\sum_{k \in K} A_k + \frac{1}{|S|} \sum_{s \in S} Q_s}\]</p><h2 id="Constraints"><a class="docs-heading-anchor" href="#Constraints">Constraints</a><a id="Constraints-1"></a><a class="docs-heading-anchor-permalink" href="#Constraints" title="Permalink"></a></h2><h3 id="Relation-between-investment-and-plant-capacity"><a class="docs-heading-anchor" href="#Relation-between-investment-and-plant-capacity">Relation between investment and plant capacity</a><a id="Relation-between-investment-and-plant-capacity-1"></a><a class="docs-heading-anchor-permalink" href="#Relation-between-investment-and-plant-capacity" title="Permalink"></a></h3><p class="math-container">\[(C_k, B_k) \in \text{piecewise}(\{ \dot{C}_{k,p}, \dot{B}_{k,p} \}_{p = 0}^m), \ \ \ \forall k \in K\]</p><p>This constraint guarantees that the pair <span>$(C_k, B_k)$</span> belongs to some linear segment defined by the points <span>$\{ \dot{C}_{k,p}, \dot{B}_{k,p} \}_{p = 0}^m$</span>.</p><h3 id="[Plant](plant.md)-existing-capacity"><a class="docs-heading-anchor" href="#[Plant](plant.md)-existing-capacity"><a href="plant.html">Plant</a> existing capacity</a><a id="[Plant](plant.md)-existing-capacity-1"></a><a class="docs-heading-anchor-permalink" href="#[Plant](plant.md)-existing-capacity" title="Permalink"></a></h3><p class="math-container">\[C_k \geq C^0_k, \ \ \ k \in K\]</p><h3 id="[Plant](plant.md)-capacity-limit"><a class="docs-heading-anchor" href="#[Plant](plant.md)-capacity-limit"><a href="plant.html">Plant</a> capacity limit</a><a id="[Plant](plant.md)-capacity-limit-1"></a><a class="docs-heading-anchor-permalink" href="#[Plant](plant.md)-capacity-limit" title="Permalink"></a></h3><p class="math-container">\[C_k \leq \overline{C}_k, \ \ \ \forall k \in K\]</p><p>This constraint is only active if the user defines a maximum capacity for the plant.</p><h3 id="[Plant](plant.md)-annuity-calculation"><a class="docs-heading-anchor" href="#[Plant](plant.md)-annuity-calculation"><a href="plant.html">Plant</a> annuity calculation</a><a id="[Plant](plant.md)-annuity-calculation-1"></a><a class="docs-heading-anchor-permalink" href="#[Plant](plant.md)-annuity-calculation" title="Permalink"></a></h3><p class="math-container">\[A_k = \frac{B_k \cdot r_k}{1 - (1 + r_k)^{-n_k}}, \ \ \ \forall k \in K\]</p><h1 id="Operation-model"><a class="docs-heading-anchor" href="#Operation-model">Operation model</a><a id="Operation-model-1"></a><a class="docs-heading-anchor-permalink" href="#Operation-model" title="Permalink"></a></h1><h2 id="Sets-2"><a class="docs-heading-anchor" href="#Sets-2">Sets</a><a class="docs-heading-anchor-permalink" href="#Sets-2" title="Permalink"></a></h2><ul><li><span>$I$</span>: set of <a href="product.html">products</a></li><li><span>$J$</span>: set of <a href="process.html">processes</a></li><li><span>$K$</span>: set of <a href="plant.html">plants</a></li><li><span>$G$</span>: set of <a href="set_of_products_constraint.md">sets of products with a sales limit in their sum</a></li><li><span>$S$</span>: set of scenarios</li><li><span>$I(g)$</span>: set of products in set <span>$g$</span>. <span>$g \in G$</span>. <span>$I(g) \subseteq I$</span>.</li><li><span>$I^{in}(j)$</span>: set of products as an input of process <span>$j$</span></li><li><span>$I^{out}(j)$</span>: set of products as an output of process <span>$j$</span></li><li><span>$J^c(i)$</span>: set of processes consuming product <span>$i$</span></li><li><span>$J^p(i)$</span>: set of processes producing product <span>$i$</span></li><li><span>$J(k)$</span>: set of processes in plant</li><li><span>$u(j)$</span>: function mapping process to its first input product</li></ul><h2 id="Constants-2"><a class="docs-heading-anchor" href="#Constants-2">Constants</a><a class="docs-heading-anchor-permalink" href="#Constants-2" title="Permalink"></a></h2><ul><li><span>$c_j$</span>: process operational costs</li><li><span>$p_{i, s}$</span>: product sell price</li><li><span>$\overline{v}_i$</span>: product sell limit</li><li><span>$\underline{v}_i$</span>: product minimum amount to be sold</li><li><span>$\omega_i$</span>: penalty for product minimum amount to be sold violation</li><li><span>$\overline{w}_g$</span>: sales limit for the sum of products in set <span>$g$</span></li><li><span>$D^0_{i,s}$</span>: product initial availability</li><li><span>$C^0_k$</span>: plant initial capacity</li><li><span>$\overline{C}_k$</span>: plant maximum capacity</li><li><span>$\theta^{in}_{j, i}$</span>: factor of product <span>$i$</span> being consumed by process <span>$j$</span></li><li><span>$\theta^{out}_{j, i}$</span>: factor of product <span>$i$</span> being produced by process <span>$j$</span></li><li><span>$\hat{C}_k$</span>: evaluated capacity</li></ul><h2 id="Decision-Variables-2"><a class="docs-heading-anchor" href="#Decision-Variables-2">Decision Variables</a><a class="docs-heading-anchor-permalink" href="#Decision-Variables-2" title="Permalink"></a></h2><ul><li><span>$D^f_{i, s}$</span>: product final availability</li><li><span>$f^{in}_{j, i, s}$</span>: amount of product <span>$i$</span> going into process <span>$j$</span></li><li><span>$f^{out}_{j, i, s}$</span>: amount of product <span>$i$</span> going out of process <span>$j$</span></li><li><span>$l_{j, s}$</span>: auxiliar variable for keeping proportions of process</li><li><span>$v_{i, s}$</span>: product sell amount</li><li><span>$C_{k, s}$</span>: plant capacity</li><li><span>$\lambda_{k, s}$</span>: marginal cost of capacity constraints</li><li><span>$Q_s$</span>: future cost</li><li><span>$\delta_{i,s}$</span>: slack for product minimum amount to be sold</li></ul><h2 id="Objective-Function-2"><a class="docs-heading-anchor" href="#Objective-Function-2">Objective Function</a><a class="docs-heading-anchor-permalink" href="#Objective-Function-2" title="Permalink"></a></h2><h3 id="Deterministic-equivalent-solution-method-2"><a class="docs-heading-anchor" href="#Deterministic-equivalent-solution-method-2">Deterministic equivalent solution method</a><a class="docs-heading-anchor-permalink" href="#Deterministic-equivalent-solution-method-2" title="Permalink"></a></h3><p>In the deterministic equivalent solution method, is added to the objective function defined in the Investment model the expected value of the future costs.</p><p class="math-container">\[+ \frac{1}{|S|} \sum_{s \in S} Q_s\]</p><h3 id="Benders-solution-method-2"><a class="docs-heading-anchor" href="#Benders-solution-method-2">Benders solution method</a><a class="docs-heading-anchor-permalink" href="#Benders-solution-method-2" title="Permalink"></a></h3><p class="math-container">\[min{\frac{1}{|S|} \sum_{s \in S} Q_s}\]</p><h2 id="Constraints-2"><a class="docs-heading-anchor" href="#Constraints-2">Constraints</a><a class="docs-heading-anchor-permalink" href="#Constraints-2" title="Permalink"></a></h2><h3 id="Costs-calculation"><a class="docs-heading-anchor" href="#Costs-calculation">Costs calculation</a><a id="Costs-calculation-1"></a><a class="docs-heading-anchor-permalink" href="#Costs-calculation" title="Permalink"></a></h3><p class="math-container">\[Q_s = \sum_{j \in J} c_j \cdot f^{in}_{j,u(j)} - \sum_{i \in I} p_{i, s} \cdot v_{i, s} + \sum_{i \in I} \omega_i \cdot \delta_{i,s}, \ \ \ \forall s \in S\]</p><h3 id="[Product](product.md)-availability"><a class="docs-heading-anchor" href="#[Product](product.md)-availability"><a href="product.html">Product</a> availability</a><a id="[Product](product.md)-availability-1"></a><a class="docs-heading-anchor-permalink" href="#[Product](product.md)-availability" title="Permalink"></a></h3><p class="math-container">\[D^f_{i, s} = D^0_{i,s} + \sum_{j \in J^p(i)} f^{out}_{j, i, s} - \sum_{j \in J^c(i)} f^{in}_{j,i,s} - v_{i,s}, \ \ \ \forall i \in I, s \in S\]</p><h3 id="[Process](process.md)-proportions"><a class="docs-heading-anchor" href="#[Process](process.md)-proportions"><a href="process.html">Process</a> proportions</a><a id="[Process](process.md)-proportions-1"></a><a class="docs-heading-anchor-permalink" href="#[Process](process.md)-proportions" title="Permalink"></a></h3><p class="math-container">\[l_{j,s} = \frac{1}{\theta^{in}_{j,i}} \cdot f^{in}_{j,i,s}, \ \ \ \forall s \in S, j \in J, i \in I^{in}(j)\]</p><p class="math-container">\[l_{j,s} = \frac{1}{\theta^{out}_{j,i}} \cdot f^{out}_{j,i,s}, \ \ \ \forall s \in S, j \in J, i \in I^{out}(j)\]</p><h3 id="Plant-capacity-limit,-based-on-the-first-product-associated-with-the-process"><a class="docs-heading-anchor" href="#Plant-capacity-limit,-based-on-the-first-product-associated-with-the-process">Plant capacity limit, based on the first product associated with the process</a><a id="Plant-capacity-limit,-based-on-the-first-product-associated-with-the-process-1"></a><a class="docs-heading-anchor-permalink" href="#Plant-capacity-limit,-based-on-the-first-product-associated-with-the-process" title="Permalink"></a></h3><p class="math-container">\[\sum_{j \in J(k)} f^{in}_{j,{u(j)},s} \leq C_{k,s},  \ \ \ \forall s \in S, k \in K\]</p><h3 id="Capacity-fishing-constraint:"><a class="docs-heading-anchor" href="#Capacity-fishing-constraint:">Capacity fishing constraint:</a><a id="Capacity-fishing-constraint:-1"></a><a class="docs-heading-anchor-permalink" href="#Capacity-fishing-constraint:" title="Permalink"></a></h3><p class="math-container">\[C_{k,s} = \hat{C}_k \ \  :\lambda_{k,s} , \ \ \ \forall s \in S, k \in K\]</p><p>This constraint guarantees that the plant capacity in the operational model is equal to the plant capacity in the investment model, and it catches the marginal cost of capacity constraints, which is used in the Benders cuts.</p><h3 id="[Plant](plant.md)-existing-capacity-2"><a class="docs-heading-anchor" href="#[Plant](plant.md)-existing-capacity-2"><a href="plant.html">Plant</a> existing capacity</a><a class="docs-heading-anchor-permalink" href="#[Plant](plant.md)-existing-capacity-2" title="Permalink"></a></h3><p class="math-container">\[C_{k,s} \geq C^0_k, \ \ \ \forall s \in S, k \in K\]</p><h3 id="[Product](product.md)-sell-limit"><a class="docs-heading-anchor" href="#[Product](product.md)-sell-limit"><a href="product.html">Product</a> sell limit</a><a id="[Product](product.md)-sell-limit-1"></a><a class="docs-heading-anchor-permalink" href="#[Product](product.md)-sell-limit" title="Permalink"></a></h3><p class="math-container">\[v_{i,s} \leq \overline{v}_i, \ \ \ \forall i \in I, s \in S\]</p><p>This constraint is only active if the product has a sell limit.</p><h3 id="[Product](product.md)-sell-lower-bound"><a class="docs-heading-anchor" href="#[Product](product.md)-sell-lower-bound"><a href="product.html">Product</a> sell lower bound</a><a id="[Product](product.md)-sell-lower-bound-1"></a><a class="docs-heading-anchor-permalink" href="#[Product](product.md)-sell-lower-bound" title="Permalink"></a></h3><p class="math-container">\[v_{i,s} \geq \underline{v}_i - \delta_{i,s}, \ \ \ \forall i \in I, s \in S\]</p><p>This constraint is only active if the product has a minimum amount to be sold.</p><h3 id="[Product](product.md)-sell-unavailability"><a class="docs-heading-anchor" href="#[Product](product.md)-sell-unavailability"><a href="product.html">Product</a> sell unavailability</a><a id="[Product](product.md)-sell-unavailability-1"></a><a class="docs-heading-anchor-permalink" href="#[Product](product.md)-sell-unavailability" title="Permalink"></a></h3><p class="math-container">\[v_{i,s} = 0, \ \ \ \forall i \in I, s \in S\]</p><p>This constraint is only active if the product sell price is zero.</p><h3 id="Sales-limit-for-the-[sum-of-products-in-each-set](sum_of_products_constraint.md)"><a class="docs-heading-anchor" href="#Sales-limit-for-the-[sum-of-products-in-each-set](sum_of_products_constraint.md)">Sales limit for the <a href="sum_of_products_constraint.html">sum of products in each set</a></a><a id="Sales-limit-for-the-[sum-of-products-in-each-set](sum_of_products_constraint.md)-1"></a><a class="docs-heading-anchor-permalink" href="#Sales-limit-for-the-[sum-of-products-in-each-set](sum_of_products_constraint.md)" title="Permalink"></a></h3><p class="math-container">\[\sum_{i \in I^{\overline{v}}_g} v_{i,s} \leq \overline{v}_g, \ \ \ \forall g \in I^{\overline{v}}, s \in S\]</p><h3 id="Positive-amount-constraints"><a class="docs-heading-anchor" href="#Positive-amount-constraints">Positive amount constraints</a><a id="Positive-amount-constraints-1"></a><a class="docs-heading-anchor-permalink" href="#Positive-amount-constraints" title="Permalink"></a></h3><p class="math-container">\[D^f_{i, s} \geq 0, \ \ \ \forall i \in I, s \in S\]</p><p class="math-container">\[f^{in}_{j,i,s} \geq 0, \ \ \ \forall j \in J, i \in I, s \in S\]</p><p class="math-container">\[f^{out}_{j,i,s} \geq 0, \ \ \ \forall \in J, i \in I, s \in S\]</p><p class="math-container">\[v_{i, s} \geq 0, \ \ \ \forall i \in I, s \in S\]</p><p class="math-container">\[C_{k, s} \geq 0, \ \ \ \forall k \in K, s \in S\]</p><p class="math-container">\[\delta_{i,s} \geq 0, \ \ \ \forall i \in I, s \in S\]</p><h1 id="Communication-between-stages"><a class="docs-heading-anchor" href="#Communication-between-stages">Communication between stages</a><a id="Communication-between-stages-1"></a><a class="docs-heading-anchor-permalink" href="#Communication-between-stages" title="Permalink"></a></h1><p>In the Benders solution method, the Investment model and the Operation model are solved iteratively, and the communication between them is made through Benders cuts. The Benders cuts are added to the Investment model, and they are based on the evaluated capacity <span>$\hat{C}_{k, s}$</span>, operational cost <span>$\hat{Q}_s$</span> and marginal cost of capacity constraints <span>$\hat{\lambda}_{k, s}$</span>. Also, the evaluated capacity of the Investment Model is updated in the fishing constraint of the Operation model.</p><h3 id="Benders-cuts"><a class="docs-heading-anchor" href="#Benders-cuts">Benders cuts</a><a id="Benders-cuts-1"></a><a class="docs-heading-anchor-permalink" href="#Benders-cuts" title="Permalink"></a></h3><p class="math-container">\[Q_s \geq \hat{Q}_s + \sum_{k \in K} \hat{\lambda}_{k, s} \cdot (C_k - \hat{C}_{k, s}), \ \ \ \forall s \in S\]</p><h3 id="Fishing-constraint-update"><a class="docs-heading-anchor" href="#Fishing-constraint-update">Fishing constraint update</a><a id="Fishing-constraint-update-1"></a><a class="docs-heading-anchor-permalink" href="#Fishing-constraint-update" title="Permalink"></a></h3><p class="math-container">\[C_{k,s} = \hat{C}_k \ \  :\lambda_{k,s} , \ \ \ \forall s \in S, k \in K\]</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="api.html">芦 API Reference</a><div class="flexbox-break"></div></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.4.1 on <span class="colophon-date" title="Friday 30 August 2024 22:16">Friday 30 August 2024</span>. Using Julia version 1.10.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
